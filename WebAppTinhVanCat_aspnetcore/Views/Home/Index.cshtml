@using WebAppTinhVanCat_aspnetcore.ExtendMethods;
@using WebAppTinhVanCat_aspnetcore.Models.Product;
@using WebAppTinhVanCat_aspnetcore.Models.ViewModelHome;
@{
    ViewData["Title"] = "Trang chủ";
    Layout = "/Views/Shared/_LayoutClient.cshtml";
}

<div class="text-center">
    <partial name="_StatusMessage" />
</div>

<div class="body">
    <div class="body_category-and-slider">

        <div class="body_category">
            
            <table class="category_list">
                <tr class="category_item">
                    <td>
                        <div class="body_category-top">DANH MỤC SẢN PHẨM</div>
                    </td>
                      
                </tr>

                @if (ViewBag.categories.Count > 0)
                {

                    @foreach (CategoryProduct category in ViewBag.categories)
                    {

                        <tr class="category_item">

                            <td>
                                <a asp-area="Product" asp-controller="ViewProduct" asp-action="Index" asp-route-productslug="@category.Slug">
                                    <span class="category-title"><i class="fa-solid fa-fan category_item-icon"></i>  @category.Title </span><i class="fa-solid fa-angle-right category_arrow-icon"></i>
                                </a>
                                
                                @if (category.CategoryChildren?.Count > 0)  // duyệt nếu có danh mục con
                                {
                                     <ul class="sub-menut">
                                        @foreach (CategoryProduct categoryLV2 in category.CategoryChildren)
                                        {
                                       
                                            <li>
                                                <a asp-area="Product" asp-controller="ViewProduct" asp-action="Index" asp-route-productslug="@categoryLV2.Slug">@categoryLV2.Title</a>

                                                @if (categoryLV2.CategoryChildren?.Count > 0)  // duyệt nếu danh mục con
                                                {
                                                    <ul class="sub-menu2">
                                                        @foreach (CategoryProduct categoryLV3 in categoryLV2.CategoryChildren)
                                                        {
                                                            <li><a asp-area="Product" asp-controller="ViewProduct" asp-action="Index" asp-route-productslug="@categoryLV3.Slug">@categoryLV3.Title</a></li>
                                                        }
                                                    </ul>
                                                   
                                                }
                                                
                                            </li>

                                       
                                        }
                                    </ul>
                                }
                               
                            </td>
                        </tr>
                        
                    }
                   
                }


            </table>
        </div>

        <div style="width:100%">

            <div id="mycarousel" class="carousel slide" data-ride="carousel">

                <!--Cho hiện thị chỉ số nếu muốn-->
                <ol class="carousel-indicators">
                    <li data-target="#mycarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#mycarousel" data-slide-to="1" class=""></li>
                    <li data-target="#mycarousel" data-slide-to="2" class=""></li>
                </ol>
                <!--Hết tạo chỉ số-->
                <!--Các slide bên trong carousel-inner-->
                <div class="carousel-inner">

                    <!--Slide 1 thiết lập hiện thị đầu tiên .active-->
                    <div class="carousel-item active">
                        <img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=800&q=60" class="d-block w-100" alt="...">
                        <!--Cho thêm hiện thị thông tin-->
                      
                    </div>

                    <!--Slide 2-->
                    <div class="carousel-item">
                        <img src="https://media.istockphoto.com/id/1358012935/vi/anh/nhi%E1%BB%81u-n%E1%BB%93i-n%E1%BA%A5u-tr%C3%AAn-b%E1%BB%81-m%E1%BA%B7t-%C4%91%C3%A1-c%E1%BA%A9m-th%E1%BA%A1ch-tr%E1%BB%91ng-r%E1%BB%97ng-v%E1%BB%9Bi-n%E1%BB%81n-nh%C3%A0-b%E1%BA%BFp-m%E1%BB%9D.jpg?s=612x612&w=0&k=20&c=5kM3gn-3l7uIsuKGSdVuie-PQQs8hzf1CYg5gvDWIPc=" class="d-block w-100" alt="...">
                    </div>
                    <!--Slide 3-->
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1564510182791-29645da7fac4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8ZmFufGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=800&q=60" class="d-block w-100" alt="...">
                    </div>
                </div>



                <!--Cho thêm khiển chuyển slide trước, sau nếu muốn-->
                <a class="carousel-control-prev" href="#mycarousel" role="button" data-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span></a>
                <a class="carousel-control-next" href="#mycarousel" role="button" data-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span> </a>
                <!--Hết tạo điều khiển chuyển Slide-->

            </div>

        </div>
      


    </div>
</div>


<div class="container-fluid">

    <div class=" row "> 
        <div class="body_featured">
            <div class="body_featured-title">
                <img src="../img/icon/chili.png" alt=""><span class="body_featured-title-text">SẢN PHẨM BÁN CHẠY NHẤT</span>
            </div>

            <div class="body_featured-product">

                <a href="./product-detail.html" class="product_link">

                    <div class="featured-product-card">
                        <div class="featured-product-img">
                            <img src="https://file.pico.vn/media/product/250-381287_qa65q60bakxxd001front1blackabove.jpg" alt="">
                        </div>
                        <div class="featured-product-item">
                            <ul class="featured-product-list-child">
                                <li class="featured-product-child-title">Tivi Qled Samsung QA55Q60BAKXXV 55" 4K Ultra HD</li>
                                <li class="featured-product-child-currentPrice">16.400.000<u>đ</u></li>
                              
                                <li></li>
                            </ul>
                        </div>

                    </div>
                </a>


            </div>
            <a href="#" class="body_featured-viewAll">XEM TẤT CẢ</a>
        </div>

    </div>

</div>



@if (ViewBag.categories.Count > 0)
{

    @foreach (HomeViewModel cate in ViewBag.catepd)
    {

        <div class="body_products">
            <div class="body_products-option">
                <ul>
                    <li class="active">
                        <a class="text-danger" asp-area="Product" asp-controller="ViewProduct" asp-action="Index" asp-route-productslug="@cate.Slug">
                            <span >@cate.Title </span>
                        </a>
                    </li>

                </ul>
            </div>

            <div class="row">
                @foreach ( ProductModel product in cate.Products)
                {
                    var srcimg = product.Photos.Count > 0 ? "/contens/Products/" + product.Photos.First().FileName : "/contens/ico/nophoto.png";
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card-product  " style="min-width:240px; max-width:270px;">

                            <div class="card shadow h-100 py-2 mb-3">

                                <a class="card-link" asp-controller="ViewProduct" asp-action="Detail" asp-route-productslug="@product.Slug">
                                    <div class="cart-img">
                                        <img src="@srcimg" class="card-img-top" alt="">
                                    </div>
                                </a>

                                <div class="card-body">
                                    <h6 class="card-title font-weight-bold "> @product.Title</h6>
                                    <p class=" mt-3">
                                        <strong class="text-danger" >@product.Price.ToPriceUnitVND()</strong>
                                    </p>
                                </div>

                                <div class="card-footer ">
                                    <a asp-controller="Order" asp-action="AddToCart" asp-route-productid="@product.ProductId" class="btn btn-danger ml-4 float-right">Đặt hàng</a>
                                </div>
                            </div>

                        </div>
                    </div>
                }

            </div>
           
        </div>

    }

}






<div class="body_blog">
    <div class="body_products-option blogs-header">
        <ul>
            <img src="/contens/ico/newspaper.png" alt="">
            <li class="active">Bài viết trên trang</li>

        </ul>
    </div>
    <div class="body_blog-container">

        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1535303311164-664fc9ec6532?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MjN8fHRlY2hub2xvZ3l8ZW58MHx8MHx8&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1526666923127-b2970f64b422?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mjh8fHRlY2hub2xvZ3l8ZW58MHx8MHx8&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1504384764586-bb4cdc1707b0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzV8fHRlY2hub2xvZ3l8ZW58MHx8MHx8&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NDR8fHRlY2hub2xvZ3l8ZW58MHx8MHx8&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1457305237443-44c3d5a30b89?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OTJ8fHRlY2hub2xvZ3l8ZW58MHx8MHx8&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
        <div class="blog-items">
            <img src="https://images.unsplash.com/photo-1535979014625-490762ceb2ff?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTM0fHx0ZWNobm9sb2d5fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=1400&q=60" alt="">
            <div class="blog-detail">
                <p class="blog-title">Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
                <p class="blog-date">19/2/2023 </p>
            </div>
        </div>
    </div>
</div>











